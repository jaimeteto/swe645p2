<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Student Survey</title>
  <!-- Bootstrap CSS (CDN) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
  <style>
    .required::after { content:" *"; color:#d00; }
    input#state { text-transform: uppercase; }
  </style>
</head>
<body class="bg-light">
  <div class="container py-5">
    <h1 class="mb-4">Student Survey</h1>
    <form id="surveyForm" class="needs-validation" novalidate>
      <!-- Contact / Survey Info -->
      <fieldset class="border rounded-3 p-3 mb-4">
        <legend class="float-none w-auto px-2">Your Information</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <label for="firstName" class="form-label required">First Name</label>
            <input type="text" id="firstName" name="firstName" class="form-control" required />
            <div class="invalid-feedback">First name is required.</div>
          </div>
          <div class="col-md-6">
            <label for="lastName" class="form-label required">Last Name</label>
            <input type="text" id="lastName" name="lastName" class="form-control" required />
            <div class="invalid-feedback">Last name is required.</div>
          </div>

          <div class="col-12">
            <label for="street" class="form-label required">Street Address</label>
            <input type="text" id="street" name="street" class="form-control" required />
            <div class="invalid-feedback">Street address is required.</div>
          </div>

          <div class="col-md-6">
            <label for="city" class="form-label required">City</label>
            <input type="text" id="city" name="city" class="form-control" required />
            <div class="invalid-feedback">City is required.</div>
          </div>
          <div class="col-md-2">
            <label for="state" class="form-label required">State (2-letter)</label>
            <input
              type="text"
              id="state"
              name="state"
              class="form-control"
              minlength="2"
              maxlength="2"
              pattern="^[A-Za-z]{2}$"
              required
              placeholder="VA"
            />
            <div class="invalid-feedback">Enter a 2-letter state code (e.g., VA).</div>
          </div>
          <div class="col-md-4">
            <label for="zip" class="form-label required">ZIP</label>
            <input
              type="text"
              id="zip"
              name="zip"
              class="form-control"
              pattern="^\d{5}(-\d{4})?$"
              required
              placeholder="12345 or 12345-6789"
            />
            <div class="invalid-feedback">Enter a valid ZIP (12345 or 12345-6789).</div>
          </div>

          <div class="col-md-6">
            <label for="phone" class="form-label required">Telephone</label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="form-control"
              required
              placeholder="(555) 555-5555"
              pattern="^[0-9()+\-.\s]{7,}$"
            />
            <div class="invalid-feedback">Telephone is required (digits, spaces, () - . allowed).</div>
          </div>
          <div class="col-md-6">
            <label for="email" class="form-label required">E-mail</label>
            <input type="email" id="email" name="email" class="form-control" required />
            <div class="invalid-feedback">Enter a valid email address.</div>
          </div>

          <div class="col-md-6">
            <label for="surveyDate" class="form-label required">Date of Survey</label>
            <input type="date" id="surveyDate" name="surveyDate" class="form-control" required />
            <div class="invalid-feedback">Survey date is required.</div>
          </div>
        </div>
      </fieldset>

      <!-- Likes (Checkboxes) -->
      <fieldset class="border rounded-3 p-3 mb-4">
        <legend class="float-none w-auto px-2">What did you like most?</legend>
        <div class="row gy-2">
          <div class="col-12 col-sm-6 col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="likeStudents" name="likes" value="students" />
              <label class="form-check-label" for="likeStudents">Students</label>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="likeLocation" name="likes" value="location" />
              <label class="form-check-label" for="likeLocation">Location</label>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="likeCampus" name="likes" value="campus" />
              <label class="form-check-label" for="likeCampus">Campus</label>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="likeAtmosphere" name="likes" value="atmosphere" />
              <label class="form-check-label" for="likeAtmosphere">Atmosphere</label>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="likeDorms" name="likes" value="dorm rooms" />
              <label class="form-check-label" for="likeDorms">Dorm Rooms</label>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="likeSports" name="likes" value="sports" />
              <label class="form-check-label" for="likeSports">Sports</label>
            </div>
          </div>
        </div>
      </fieldset>

      <!-- Interest Source (Radios) -->
      <fieldset class="border rounded-3 p-3 mb-4">
        <legend class="float-none w-auto px-2 required">How did you become interested?</legend>
        <div class="row gy-2">
          <div class="col-12 col-sm-6 col-md-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="interest" id="interestFriends" value="friends" required />
              <label class="form-check-label" for="interestFriends">Friends</label>
              <div class="invalid-feedback">Please select an option.</div>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="interest" id="interestTV" value="television" />
              <label class="form-check-label" for="interestTV">Television</label>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-3">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="interest" id="interestInternet" value="internet" />
              <label class="form-check-label" for="interestInternet">Internet</label>
            </div>
          </div>
          <div class="col-12 col-sm-6 col-md-3">
            <div class="form-check d-flex align-items-center gap-2">
              <input class="form-check-input" type="radio" name="interest" id="interestOther" value="other" />
              <label class="form-check-label" for="interestOther">Other</label>
              <input type="text" id="interestOtherText" class="form-control form-control-sm" placeholder="Please specify" disabled />
            </div>
          </div>
        </div>
      </fieldset>

      <!-- Recommendation (Dropdown) -->
      <div class="mb-4">
        <label for="recommend" class="form-label required">How likely are you to recommend this school?</label>
        <select id="recommend" name="recommend" class="form-select" required>
          <option value="" selected disabled>Select...</option>
          <option>Very Likely</option>
          <option>Likely</option>
          <option>Unlikely</option>
        </select>
        <div class="invalid-feedback">Please choose one option.</div>
      </div>

      <!-- Raffle -->
      <div class="mb-4">
        <label for="raffle" class="form-label required">Raffle (at least 10 numbers, 1â€“100, comma-separated)</label>
        <input
          type="text"
          id="raffle"
          name="raffle"
          class="form-control"
          placeholder="e.g., 4,12,33,7,100,56,22,18,90,3"
          required
        />
        <div id="raffleHelp" class="form-text">Example: 4,12,33,7,100,56,22,18,90,3</div>
        <div class="invalid-feedback" id="raffleError">
          Enter at least 10 comma-separated integers from 1 to 100.
        </div>
      </div>

      <!-- Comments -->
      <div class="mb-4">
        <label for="comments" class="form-label">Additional Comments</label>
        <textarea id="comments" name="comments" class="form-control" rows="4" placeholder="Your comments..."></textarea>
      </div>

      <!-- Buttons -->
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">Submit</button>
        <button type="reset" class="btn btn-outline-secondary">Cancel</button>
        <a href="index.html" class="btn btn-link">Back to Home</a>
      </div>
    </form>
  </div>

  <!-- Bootstrap JS (optional, for nicer validation styling) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
          crossorigin="anonymous"></script>

  <script>
    // Prefill survey date with today's date
    (function setToday() {
      const d = new Date();
      const yyyy = d.getFullYear();
      const mm = String(d.getMonth() + 1).padStart(2, '0');
      const dd = String(d.getDate()).padStart(2, '0');
      const today = `${yyyy}-${mm}-${dd}`;
      const surveyDate = document.getElementById('surveyDate');
      if (surveyDate && !surveyDate.value) surveyDate.value = today;
    })();

    // Enable/disable "Other" text when "Other" radio is selected
    const interestRadios = document.querySelectorAll('input[name="interest"]');
    const otherText = document.getElementById('interestOtherText');
    interestRadios.forEach(r => {
      r.addEventListener('change', () => {
        const isOther = document.getElementById('interestOther').checked;
        otherText.disabled = !isOther;
        if (isOther) { otherText.focus(); }
        else { otherText.value = ''; }
      });
    });

    // Raffle custom validation: >=10 integers, each 1..100
    const raffleInput = document.getElementById('raffle');
    function validateRaffle() {
      const raw = raffleInput.value.trim();
      const parts = raw.split(',').map(s => s.trim()).filter(Boolean);
      const allValid = parts.every(p => /^\d+$/.test(p) && +p >= 1 && +p <= 100);
      const ok = parts.length >= 10 && allValid;
      raffleInput.setCustomValidity(ok ? '' :
        'Enter at least 10 comma-separated integers from 1 to 100 (e.g., 4,12,33,7,100,56,22,18,90,3).'
      );
    }
    raffleInput.addEventListener('input', validateRaffle);

    // Bootstrap-style client validation
    const form = document.getElementById('surveyForm');
    form.addEventListener('submit', function (e) {
      validateRaffle();
      if (!form.checkValidity()) {
        e.preventDefault();
        e.stopPropagation();
      }
      form.classList.add('was-validated');
    });

    // Force STATE to uppercase as user types
    const stateInput = document.getElementById('state');
    stateInput.addEventListener('input', () => {
      stateInput.value = stateInput.value.toUpperCase().slice(0,2);
    });
  </script>
</body>
</html>
